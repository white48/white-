<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <title>النبيل للتجارة والاستيراد</title>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <link rel="stylesheet" href="style.css"/>
</head>
<body>
<header>
  <h1>النبيل للتجارة والاستيراد</h1>
  <nav>
    <a href="add-product.html">➕ إضافة منتج</a>
  </nav>
  <div class="search-container">
    <input id="search" placeholder="ابحث عن منتج...">
    <button onclick="filter()">بحث</button>
  </div>
</header>

<main id="list"></main>

<script type="module">
import {loadProducts} from './store.js';

function render(list){
  const box = document.getElementById('list');
  box.innerHTML = '';
  list.forEach(p=>{
    const card = document.createElement('div');
    card.className='card';
    card.innerHTML = `
      <img src="${p.image}" alt="">
      <h2>${p.name}</h2>
      <a class="details" href="product.html?id=${p.id}">عرض التفاصيل</a>
    `;
    box.appendChild(card);
  });
}

render(loadProducts());

window.filter = ()=>{
  const q = document.getElementById('search').value.toLowerCase();
  const filtered = loadProducts().filter(p=>p.name.toLowerCase().includes(q));
  render(filtered);
};
</script>
</body>
</html>
